<%- include('../partials/head') %>
<style>
  .favourites-header {
    text-align: center;
    margin-bottom: 3rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid #e5e5e5;
  }

  .favourites-header h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    color: #1f6feb;
  }

  .subtitle {
    color: #666;
    font-size: 1.1rem;
  }

  .fav-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    border: 1px solid #e5e5e5;
    transition: transform 0.2s, box-shadow 0.2s;
    display: flex;
    flex-direction: column;
  }

  .fav-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }

  .fav-image-wrapper {
    height: 200px;
    overflow: hidden;
  }

  .fav-image-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .fav-details {
    padding: 1.5rem;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .fav-details h3 {
    margin: 0 0 1rem 0;
    font-size: 1.3rem;
    color: #1f6feb;
  }

  .fav-info {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #f0f0f0;
  }

  .info-item {
    display: flex;
    flex-direction: column;
  }

  .info-label {
    font-size: 0.85rem;
    color: #999;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .info-value {
    font-size: 1rem;
    color: #333;
    font-weight: 500;
    margin-top: 0.25rem;
  }

  .info-value.price {
    color: #1f6feb;
    font-weight: 600;
  }

  .fav-desc {
    color: #666;
    margin: 1rem 0;
    line-height: 1.5;
    font-size: 0.95rem;
    flex: 1;
  }

  .fav-actions {
    display: flex;
    gap: 0.75rem;
    margin-top: auto;
    padding-top: 1rem;
  }

  .btn-book {
    flex: 1;
    background: #1f6feb;
    color: #fff;
    border: none;
    padding: 0.6rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s;
  }

  .btn-book:hover {
    background: #145bd3;
  }

  .btn-remove {
    flex: 1;
    background: #ef4444;
    color: #fff;
    border: none;
    padding: 0.6rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    transition: background 0.2s;
  }

  .btn-remove:hover {
    background: #dc2626;
  }

  .empty-state {
    text-align: center;
    padding: 4rem 2rem;
    background: #f8f8f8;
    border-radius: 12px;
  }

  .empty-icon {
    font-size: 3.5rem;
    margin-bottom: 1rem;
  }

  .empty-state h2 {
    font-size: 1.8rem;
    color: #333;
    margin-bottom: 0.5rem;
  }

  .empty-state p {
    color: #666;
    margin-bottom: 2rem;
    font-size: 1.05rem;
  }

  .btn-explore {
    display: inline-block;
    background: #1f6feb;
    color: #fff;
    padding: 0.75rem 2rem;
    border-radius: 6px;
    text-decoration: none;
    font-weight: 600;
    transition: background 0.2s;
  }

  .btn-explore:hover {
    background: #145bd3;
    text-decoration: none;
  }

  .card-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
  }

  @media (max-width: 768px) {
    .favourites-header h1 {
      font-size: 2rem;
    }

    .fav-info {
      grid-template-columns: 1fr;
    }

    .fav-actions {
      flex-direction: column;
      gap: 0.5rem;
    }

    .btn-book,
    .btn-remove {
      width: 100%;
    }

    .card-container {
      grid-template-columns: 1fr;
    }
  }
</style>
</head>
<body>
  <%- include('../partials/nav') %>
  <main>
    <section class="favourites-header">
      <h1>â™¥ My Favourite Homes</h1>
      <p class="subtitle">Your curated collection of properties</p>
    </section>

    <% if (registeredHomes.length === 0) { %>
      <div class="empty-state">
        <div class="empty-icon">ðŸ’”</div>
        <h2>No favourites yet</h2>
        <p>Start adding homes to your wishlist from our collection.</p>
        <a href="/homes" class="btn-explore">Explore Homes</a>
      </div>
    <% } else { %>
      <div class="card-container">
        <% registeredHomes.forEach(home => { %>
          <div class="fav-card">
            <div class="fav-image-wrapper">
              <% const photoUrl = home.imageUrl || home.photourl; %>
              <% if (photoUrl) { %>
                <img src="<%= photoUrl %>" alt="<%= home.housename %>" onerror="this.onerror=null;this.src='/images/placeholder.svg'">
              <% } else { %>
                <img src="/images/placeholder.svg" alt="placeholder">
              <% } %>
            </div>
            
            <div class="fav-details">
              <h3><%= home.housename %></h3>
              
              <div class="fav-info">
                <div class="info-item">
                  <span class="info-label">Location</span>
                  <span class="info-value"><%= home.location || 'Not specified' %></span>
                </div>
                <div class="info-item">
                  <span class="info-label">Price/Night</span>
                  <span class="info-value price">$<%= home.price || '0' %></span>
                </div>
              </div>

              <% if (home.description) { %>
                <p class="fav-desc"><%= home.description.substring(0, 100) %>...</p>
              <% } %>

              <div class="fav-actions">
                <button class="btn-book" onclick="alert('Booking feature coming soon!')">Book Now</button>
                <form action="/favourites/delete/<%= home._id %>" method="POST" style="flex: 1;">
                  <button type="submit" class="btn-remove" style="width: 100%;">Remove</button>
                </form>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>
  </main>
    
</body>
</html>